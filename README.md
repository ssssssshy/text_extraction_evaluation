# Оценка качества извлечения текста из новостей

Этот проект позволяет автоматически оценить работу вашей библиотеки по извлечению текста из новостных страниц. В результате вы получите метрики полноты извлечения и значимости потерянных фрагментов, а также сможете добавить свои комментарии и рекомендации по улучшению.

---

## Структура проекта

text_extraction_evaluation/
├── input.xlsx # Входная таблица (id, URL, lib_text)
├── ref/ # Папка с эталонными текстами (ref/{id}.txt)
├── evaluate_extractor.py # Скрипт для анализа
├── generate_refs.py # (опционально) Скрипт для автогенерации эталонов с newspaper3k
├── requirements.txt # Зависимости Python
└── README.md # Инструкция (этот файл)

markdown
Копировать
Редактировать

---

## 1. Подготовка `input.xlsx`

1. Откройте `input.xlsx` в Excel (или любой совместимой программе).  
2. Убедитесь, что в нём есть три колонки (заголовок в первой строке):
   - `id`       — уникальный идентификатор (например, 001, 002 …)  
   - `URL`      — ссылка на страницу с новостью  
   - `lib_text` — текст, который вернула ваша библиотека  
3. Если у вас пока только `URL` и `lib_text`, добавьте слева колонку `id`:
   - В ячейке A2 вставьте:  
     ```excel
     =TEXT(ROW(A2)-1,"000")
     ```
   - Протяните формулу вниз до конца данных (тогда для 51 записи получите от 001 до 051).  
4. Сохраните изменения.

---

## 2. Подготовка эталонных текстов

Эталон (reference) — это «правильный» текст статьи, с которым мы сравниваем результат вашей библиотеки.

### Вариант A: Ручная разметка

1. Создайте папку `ref/` рядом с `input.xlsx`.  
2. Для каждой строки `id` откройте URL, выделите весь текст новости и сохраните его в файл:  
ref/001.txt
ref/002.txt
…

markdown
Копировать
Редактировать
Используйте UTF‑8 кодировку.

### Вариант B: Автогенерация с newspaper3k

1. Убедитесь, что в `requirements.txt` есть `newspaper3k`.  
2. Запустите:
```bash
python generate_refs.py
Скрипт прочитает input.xlsx, спарсит каждый URL и запишет ref/{id}.txt.

3. Установка зависимостей
В файле requirements.txt должны быть следующие строки:

nginx
Копировать
Редактировать
pandas
scikit-learn
openpyxl
newspaper3k   # если используете автогенерацию эталонов
Установите их командой:

bash
Копировать
Редактировать
pip install -r requirements.txt
4. Запуск анализа
После подготовки input.xlsx и папки ref/ запустите:

bash
Копировать
Редактировать
python evaluate_extractor.py
Скрипт выполнит для каждой новости:

ref_len: число слов в эталоне

ext_len: число слов в извлечённом тексте

completeness: процент совпадения слов (difflib)

lost_significance: оценка значимости упущенных предложений (TF‑IDF: низкая/средняя/высокая)

comments: пустая колонка для ваших наблюдений

И сохранит итог в evaluation.xlsx.